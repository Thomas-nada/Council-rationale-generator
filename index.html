<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intersect Council Rationale Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Intersect Council Rationale Generator</h1>
    <form id="metadata-form">

        <div class="step" id="step-1">
            <h2>Step 1: Basic Information</h2>
            <div class="form-group">
                <label for="subject">Subject:</label>
                <input type="text" id="subject" placeholder="e.g., Rationale for Vote on GovAction XYZ-123" required>
                <small>A concise title for this metadata entry.</small>
            </div>
            <div class="form-group">
                <label for="authors">Author(s):</label>
                <textarea id="authors" rows="3" placeholder="Enter author details. For multiple, separate with semicolons or new lines. E.g., Org Name <contact@org.io>; Individual Name" required></textarea>
                 <small>Name and optional contact (e.g., email) of the CC members authoring this rationale.</small>
            </div>
            <div class="navigation-buttons">
                <button type="button" onclick="nextStep()">Next</button>
            </div>
        </div>

        <div class="step" id="step-2" style="display: none;">
            <h2>Step 2: Core Rationale </h2>
            <div class="form-group">
                <label for="summary">Summary:</label>
                <textarea id="summary" rows="4" maxlength="300" required></textarea>
                <small>Short statement of stance and rationale (Max 300 chars). <span id="summary-char-count">0</span>/300</small>
            </div>
             <div class="form-group">
                <label for="rationaleStatement">Rationale Statement:</label>
                <textarea id="rationaleStatement" rows="10" required></textarea>
                <small>Full, detailed rationale. Markdown is supported.</small>
            </div>
            <div class="navigation-buttons">
                <button type="button" onclick="prevStep()">Previous</button>
                <button type="button" onclick="nextStep()">Next</button>
            </div>
        </div>

        <div class="step" id="step-3" style="display: none;">
            <h2>Step 3: Supporting Discussion (Optional)</h2>
             <div class="form-group">
                <label for="precedentDiscussion">Precedent Discussion:</label>
                <textarea id="precedentDiscussion" rows="6"></textarea>
                <small>Discuss relevant precedent. Markdown is supported.</small>
            </div>
             <div class="form-group">
                <label for="counterargumentDiscussion">Counterargument Discussion:</label>
                <textarea id="counterargumentDiscussion" rows="6"></textarea>
                <small>Discuss significant counterarguments. Markdown is supported.</small>
            </div>
             <div class="form-group">
                <label for="conclusion">Conclusion:</label>
                <textarea id="conclusion" rows="4"></textarea>
                <small>Concluding remarks. Markdown is NOT supported here.</small>
            </div>
            <div class="navigation-buttons">
                <button type="button" onclick="prevStep()">Previous</button>
                <button type="button" onclick="nextStep()">Next</button>
            </div>
        </div>

        <div class="step" id="step-4" style="display: none;">
            <h2>Step 4: Internal Voting (Optional)</h2>
            <p>If this CC member represents an organization/consortium with internal voting, provide the breakdown below.</p>
            <div class="form-group-inline">
                <label for="internal_constitutional_votes">Constitutional Votes:</label>
                <input type="number" id="internal_constitutional_votes" min="0" step="1">
            </div>
             <div class="form-group-inline">
                <label for="internal_unconstitutional_votes">Unconstitutional Votes:</label>
                <input type="number" id="internal_unconstitutional_votes" min="0" step="1">
            </div>
             <div class="form-group-inline">
                <label for="internal_abstain_votes">Abstain Votes:</label>
                <input type="number" id="internal_abstain_votes" min="0" step="1">
            </div>
             <div class="form-group-inline">
                <label for="internal_did_not_vote">Did Not Vote:</label>
                <input type="number" id="internal_did_not_vote" min="0" step="1">
            </div>
             <div class="form-group-inline">
                <label for="internal_against_vote">Votes Against Voting:</label> <input type="number" id="internal_against_vote" min="0" step="1">
            </div>
            <div class="navigation-buttons">
                <button type="button" onclick="prevStep()">Previous</button>
                <button type="button" onclick="nextStep()">Next</button>
            </div>
        </div>

        <div class="step" id="step-5" style="display: none;">
            <h2>Step 5: References</h2>
            <div class="form-group">
                <label for="relevantArticles">Relevant Constitution Articles:</label>
                <textarea id="relevantArticles" rows="5" placeholder="Enter one URI or identifier per line. e.g., cardano:constitution:article-III-section-2"></textarea>
                <small>List relevant constitution articles (CIP-136 `RelevantArticles`).</small>
            </div>
             <div class="form-group">
                <label for="otherReferences">Other References (e.g., GovAction Link):</label>
                <textarea id="otherReferences" rows="5" placeholder="Enter one URI per line. Optionally add a description after a pipe symbol (|). e.g., https://gov.action/link | Link to the Governance Action"></textarea>
                <small>List other relevant URIs (Standard CIP-100 `Reference`).</small>
            </div>
             <div class="navigation-buttons">
                <button type="button" onclick="prevStep()">Previous</button>
                <button type="button" onclick="nextStep()">Next</button> </div>
        </div>

         <div class="step" id="step-6" style="display: none;">
            <h2>Step 6: Review and Generate</h2>
            <p>Please review the information below. Go back to previous steps to make changes.</p>
            <div id="review-area">
                </div>
            <div class="navigation-buttons">
                <button type="button" onclick="prevStep()">Previous</button>
                <button type="button" id="generate-button" onclick="generateJson()">Generate JSON File</button>
            </div>
            <div id="error-message" class="error"></div>
        </div>

    </form>

    <script src="script.js"></script>
</body>
</html>